import {ArticleLayout} from '@/components/ArticleLayout'
import IntroImageComponent from "./into-image";

export const article = {
    author: 'Abdullah Hashim',
    date: '2024-10-25',
    title: 'التطبيقات و توثيق الدخول',
    description: '',
    tags: [
        'Security',
        'Authentication',
        "Apps",
    ]
}

export const metadata = {
    title: article.title,
    description: article.description,
    twitter: {
        card: 'summary_large_image',
        creator: '@abdullahjsx',
        title: article.title,
        description: article.description,
        images: ''
    },
    openGraph: {
        type: 'article',
        title: article.title,
        description: article.description,
        tags: article.tags,
        authors: article.author,
        images: ''
    },
}


export default (props) => <ArticleLayout article={article} {...props} />



## مدخل
موضوع التوثيق يعتبر من أهم النقاط في الأنظمة و التطبيقات، لأنه يتعلق بحماية بيانات المستخدمين وضمان أمانهم. هو من أكثر النقاط حساسية، لأن أي خلل فيه ممكن يسبب مشاكل كبيرة وممكن تأثر على سمعة و ثقة التطبيق.

عشان كذا، مهم نعرف كيف العناصر تتواصل مع بعضها البعض حتى تتأكد من موثوقية المستخدم، وكيف نقدر نضمن أن كل شيء يشتغل بشكل آمن وسلس. فهم هذه العملية يساعدنا نختار الطريقة الأنسب لتطبيقاتنا ونحمي بيانات المستخدمين بشكل أفضل.

### بشكل تقني احنا فين بنتكلم؟

<div className={"flex flex-row gap-4 justify-center"}>
    <IntroImageComponent image="intro" width={300}/>
</div>
الرسم البياني اعلاه المفروض يشرح هذه المقالة راح تتكلم عن ايش بالزبط.
والي هوا: كيف نتحقق من صحة بيانات الشخص الي بيطلب تسجيل الدخول

### النقاط الي راح نتكلم عنها في هذه المقالة:
- كيف نطبق التحقق من صحة البيانات المدخلة مع المخزنة
- الخدمات السحابية: Firebase وAuth0
- تسجيل الدخول عبر مقدمي الخدمات مثل Google

---

## كيف نطبق التحقق من صحة البيانات المدخلة مع المخزنة
خلينا نتكلم عن كيفية التحقق من صلاحية البيانات المدخلة مع المخزنة باستخدام FastAPI في بايثون.
الهدف هنا هو التأكد من أن اسم المستخدم وكلمة المرور المدخلة من قبل المستخدم تتطابق مع البيانات المخزنة في قاعدة البيانات.

### خطوات التحقق من صحة البيانات:

استقبال البيانات المدخلة:
- المستخدم يدخل اسم المستخدم وكلمة المرور في واجهة التطبيق.
- يتم إرسال هذه البيانات إلى السيرفر عبر FastAPI.

البحث في قاعدة البيانات:
- نبحث عن اسم المستخدم في قاعدة البيانات.
- إذا كان اسم المستخدم موجود، نسترجع كلمة المرور المخزنة.

التحقق من كلمة المرور:
- نقارن كلمة المرور المدخلة مع الكلمة المخزنة بعد تشفيرها.
- نستخدم مكتبة مثل `bcrypt` للتحقق من تطابق كلمات المرور.

إرجاع النتيجة:
- إذا كانت البيانات صحيحة، نرجع للمستخدم توكن JWT أو رسالة نجاح.
- إذا كانت البيانات غير صحيحة، نرجع رسالة خطأ توضح المشكلة.

تطبيق الخطوات عن طريق Python - FastAPI

```python
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from passlib.context import CryptContext

app = FastAPI()

# نموذج البيانات المدخلة
class UserLogin(BaseModel):
    username: str
    password: str

# إعدادات التشفير
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

# قاعدة بيانات وهمية
fake_db = {
# كلمة مرور مشفرة
    "user1": "$2b$12$KIXQ9KIXQ9KIXQ9KIXQ9KIXQ9KIXQ9KIXQ9KIXQ9KIXQ9KI"
}

# دالة هدفها التأكد من تطابق كلمة المرور المدخلة و كلمة المرور المخزنة
def verify_password(plain_password, hashed_password):
    return pwd_context.verify(plain_password, hashed_password)

@app.post("/login")
def login(user: UserLogin):
    if user.username in fake_db:
        hashed_password = fake_db[user.username]
        if verify_password(user.password, hashed_password):
            return {"message": "تسجيل الدخول ناجح. مبروك، أنت فعلاً أنت!"}
        else:
            raise HTTPException(status_code=400, detail="كلمة المرور غير صحيحة. حاول مرة ثانية!")
    else:
        raise HTTPException(status_code=404, detail="اسم المستخدم غير موجود؟")

```


